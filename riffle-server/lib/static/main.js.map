{"version":3,"sources":["./src/app/resource.service.ts","../riffle-server/src/RiffleSchema.ts","./src/environments/environment.ts","./src/app/types/animated-card.ts","./src/app/app.component.ts","./src/app/app.component.html","./src/app/app.module.ts","./src/app/colyseus.service.ts","./src/data/card-spritesheet-map.ts","./src/app/lobby/lobby.component.ts","./src/app/lobby/lobby.component.html","./src/app/game/game.component.ts","./src/app/game/game.component.html","./src/app/navbar/navbar.component.ts","./src/app/navbar/navbar.component.html","./src/app/app-routing.module.ts","./src/app/navbar/navbar.service.ts","./src/main.ts","./$_lazy_route_resource lazy namespace object"],"names":[],"mappings":"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","file":"main.js","sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { CardSpritesheetMap } from 'src/data/card-spritesheet-map';\r\nimport { Card } from '../../../riffle-server/src/RiffleSchema';\r\nimport { SpritesheetMetadata } from './types/spritesheet-metadata';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class ResourceService {\r\n  public spritesheet: HTMLImageElement;\r\n\r\n  constructor() {\r\n    this.spritesheet = new Image();\r\n    this.spritesheet.src = 'assets/playingCards.png';\r\n  }\r\n\r\n  public getCardSpritesheetMedata(card: Card): SpritesheetMetadata {\r\n    const suit = {\r\n      0: 'Clubs',\r\n      1: 'Diamonds',\r\n      2: 'Hearts',\r\n      3: 'Spades'\r\n    }[card.suit];\r\n\r\n    let num: string;\r\n    switch (card.num) {\r\n      case 1:\r\n        num = 'A';\r\n        break;\r\n      case 11:\r\n        num = 'J';\r\n        break;\r\n      case 12:\r\n        num = 'Q';\r\n        break;\r\n      case 13:\r\n        num = 'K';\r\n        break;\r\n      default:\r\n        num = card.num.toString();\r\n    }\r\n\r\n    const metadataKey = `${suit}${num}`;\r\n    return CardSpritesheetMap[metadataKey];\r\n  }\r\n}\r\n","import { Schema, ArraySchema, MapSchema, type } from '@colyseus/schema';\r\n\r\nexport enum GameView {\r\n  GameLobby,\r\n  Swapping,\r\n  Showdown\r\n}\r\n\r\nexport const GameConstants = {\r\n  roundTimeMS: 30 * 1000,\r\n};\r\n\r\nexport class Card extends Schema {\r\n  @type('uint8') num: number = 0;\r\n  @type('uint8') suit: number = 0;\r\n\r\n  constructor(num: number, suit: number) {\r\n    super();\r\n    this.num = num;\r\n    this.suit = suit;\r\n  }\r\n\r\n  // converts to format compatible with pokersolver library\r\n  // E.g. [num=1, suit=0] -> Ace of Spades -> 'As'\r\n  public asPokersolverString(): string {\r\n    const suit = {\r\n      0: 'c',\r\n      1: 'd',\r\n      2: 'h',\r\n      3: 's'\r\n    }[this.suit];\r\n\r\n    let num: string;\r\n    switch (this.num) {\r\n      case 1:\r\n        num = 'A';\r\n        break;\r\n      case 10:\r\n        num = 'T';\r\n        break;\r\n      case 11:\r\n        num = 'J';\r\n        break;\r\n      case 12:\r\n        num = 'Q';\r\n        break;\r\n      case 13:\r\n        num = 'K';\r\n        break;\r\n      default:\r\n        num = this.num.toString();\r\n    }\r\n\r\n    return num.concat(suit);\r\n  }\r\n}\r\n\r\nexport class Player extends Schema {\r\n  @type('string')\r\n  id: string;\r\n\r\n  @type('string')\r\n  name: string;\r\n\r\n  @type([ Card ])\r\n  cards = new ArraySchema<Card>();\r\n\r\n  @type('string')\r\n  currentHandDesc: string;\r\n\r\n  @type('number')\r\n  currentHandScore: number;\r\n\r\n  @type('boolean')\r\n  isCurrentlyWinning: boolean;\r\n\r\n  @type('uint16')\r\n  score = 0;\r\n\r\n  @type('boolean')\r\n  votedNextRound: boolean = false;\r\n\r\n  @type('boolean')\r\n  isHost: boolean = false;\r\n\r\n  constructor(id: string, name: string, isHost: boolean) {\r\n    super();\r\n    this.id = id;\r\n    this.name = name;\r\n    this.isHost =  isHost;\r\n  }\r\n}\r\n\r\nexport class ShowdownResult extends Schema{\r\n  @type('string')\r\n  playerId: string;\r\n\r\n  @type('string')\r\n  playerName: string;\r\n\r\n  @type('string')\r\n  hand: string;\r\n\r\n  @type('uint16')\r\n  handScore: number;\r\n\r\n  @type('uint32')\r\n  totalScore: number;\r\n\r\n  @type('boolean')\r\n  isWinningHand: boolean;\r\n\r\n  constructor(\r\n    playerId: string,\r\n    playerName: string,\r\n    hand: string,\r\n    handScore: number,\r\n    totalScore: number,\r\n    isWinningHand: boolean,\r\n  ) {\r\n    super();\r\n    this.playerId = playerId;\r\n    this.playerName = playerName;\r\n    this.hand = hand;\r\n    this.handScore = handScore;\r\n    this.totalScore = totalScore;\r\n    this.isWinningHand = isWinningHand;\r\n  }\r\n}\r\n\r\nexport class RiffleState extends Schema {\r\n  @type('uint8')\r\n  gameView: GameView;\r\n\r\n  @type({ map: Player })\r\n  players = new MapSchema<Player>();\r\n\r\n  @type([ Card ])\r\n  commonCards = new ArraySchema<Card>();\r\n\r\n  @type([ Card ])\r\n  deck: ArraySchema<Card>;\r\n\r\n  @type('uint16')\r\n  roundTimeRemainingMS: number;\r\n\r\n  @type([ ShowdownResult ])\r\n  showdownResults: ShowdownResult[];\r\n\r\n  @type('uint8')\r\n  numVotedNextRound: number;\r\n\r\n  @type('uint8')\r\n  nextRoundVotesRequired: number;\r\n}\r\n","// This file can be replaced during build by using the `fileReplacements` array.\r\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\r\n// The list of file replacements can be found in `angular.json`.\r\n\r\nexport const environment = {\r\n  production: false\r\n};\r\n\r\n/*\r\n * For easier debugging in development mode, you can import the following file\r\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\r\n *\r\n * This import should be commented out in production mode because it will have a negative impact\r\n * on performance if an error is thrown.\r\n */\r\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\r\n","import { Card } from \"../../../../riffle-server/src/RiffleSchema\";\r\n\r\nexport class AnimtatedCard {\r\n    card: Card;\r\n    x: number;\r\n    y: number;\r\n    velX: number;\r\n    velY: number;\r\n    stepsRemaining: number;\r\n\r\n    get roundX(): number {\r\n        return Math.round(this.x);\r\n    }\r\n\r\n    get roundY(): number {\r\n        return Math.round(this.y);\r\n    }\r\n\r\n    get isFinished(): boolean {\r\n        return this.stepsRemaining <= 0;\r\n    }\r\n\r\n    constructor(\r\n        card: Card,\r\n        srcX: number,\r\n        srcY: number,\r\n        destX: number,\r\n        destY: number,\r\n        steps: number,\r\n    ) {\r\n        this.card = card;\r\n        this.x = srcX;\r\n        this.y = srcY;\r\n        this.velX = (destX - srcX) / steps;\r\n        this.velY = (destY - srcY) / steps;\r\n        this.stepsRemaining = steps;\r\n    }\r\n\r\n    public update(): void {\r\n        this.x += this.velX;\r\n        this.y += this.velY;\r\n        this.stepsRemaining--;\r\n    }\r\n}","import { Component } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-root',\r\n  templateUrl: './app.component.html',\r\n  styleUrls: ['./app.component.css']\r\n})\r\nexport class AppComponent {\r\n  title = 'resource-game-client';\r\n}\r\n","\r\n<app-navbar></app-navbar>\r\n<router-outlet></router-outlet>","import { NgModule } from '@angular/core';\r\nimport { BrowserModule } from '@angular/platform-browser';\r\n\r\nimport { AppComponent } from './app.component';\r\nimport { NavbarComponent } from './navbar/navbar.component';\r\nimport { AppRoutingModule } from './app-routing.module';\r\nimport { LobbyComponent } from './lobby/lobby.component';\r\nimport { GameComponent } from './game/game.component';\r\nimport { ReactiveFormsModule } from '@angular/forms';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    AppComponent,\r\n    NavbarComponent,\r\n    LobbyComponent,\r\n    GameComponent\r\n  ],\r\n  imports: [\r\n    BrowserModule,\r\n    AppRoutingModule,\r\n    ReactiveFormsModule,\r\n  ],\r\n  providers: [],\r\n  bootstrap: [AppComponent]\r\n})\r\nexport class AppModule { }\r\n","import { Injectable } from '@angular/core';\r\nimport { Client as ColyseusClient, Room, RoomAvailable } from 'colyseus.js';\r\nimport { from, Observable } from 'rxjs';\r\nimport { tap } from 'rxjs/operators';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class ColyseusService {\r\n  public allRooms: RoomAvailable[];\r\n  private client: ColyseusClient;\r\n  public room: Room;\r\n  public room$: Observable<Room>;\r\n  public gamePasscode: string;\r\n\r\n  constructor() {\r\n    this.initClient();\r\n  }\r\n\r\n  private initClient(): void {\r\n    const host = window.document.location.host.replace(/:.*/, '');\r\n    const serverUrl = location.protocol.replace(\"http\", \"ws\") + \"//\" + host + (location.port ? ':'+ location.port : '');\r\n\r\n    this.client = new ColyseusClient(serverUrl);\r\n    this.client.joinOrCreate('lobby').then(lobby => {\r\n      lobby.onMessage(\"rooms\", (rooms) => {\r\n        this.allRooms = rooms;\r\n      });\r\n      \r\n      lobby.onMessage(\"+\", ([roomId, room]) => {\r\n        const roomIndex = this.allRooms.findIndex((room) => room.roomId === roomId);\r\n        if (roomIndex !== -1) {\r\n          this.allRooms[roomIndex] = room;\r\n        } else {\r\n          this.allRooms.push(room);\r\n        }\r\n      });\r\n      \r\n      lobby.onMessage(\"-\", (roomId) => {\r\n        this.allRooms = this.allRooms.filter((room) => room.roomId !== roomId);\r\n      });\r\n    });\r\n  }\r\n\r\n  public createRoom(options: any): Observable<Room> {\r\n    this.room$ = from(\r\n      this.client.create('riffle_room', {\r\n        ...options\r\n      })\r\n    ).pipe(\r\n      tap(room => {\r\n        this.room = room;\r\n\r\n        room.onMessage('debug', (debugInfo) => {\r\n          console.log('DEBUG:', debugInfo);\r\n        });\r\n\r\n        room.onMessage('passcode', (passcode) => {\r\n          this.gamePasscode = passcode;\r\n        });\r\n      }),\r\n    );\r\n\r\n    return this.room$;\r\n  }\r\n\r\n  public joinGame(roomId: string, options: any): Observable<Room> {\r\n    this.room$ = from(\r\n      this.client.joinById(roomId, { ...options })\r\n    ).pipe(\r\n      tap(room => {\r\n        this.room = room;\r\n\r\n        room.onMessage('debug', (debugInfo) => {\r\n          console.log('DEBUG:', debugInfo);\r\n        });\r\n\r\n        room.onMessage('passcode', (passcode) => {\r\n          this.gamePasscode = passcode;\r\n        });\r\n      }),\r\n    );\r\n\r\n    return this.room$;\r\n  }\r\n\r\n  public startGame(): void {\r\n    this.room.send('start-game');\r\n  }\r\n\r\n  public swapCards(commonIndex: number, handIndex: number): void {\r\n    this.room.send('swap-cards', {\r\n      handIndex,\r\n      commonIndex\r\n    });\r\n  }\r\n\r\n  public sortHand(): void {\r\n    this.room.send('sort-hand');\r\n  }\r\n}\r\n","import { SpritesheetMetadata } from \"src/app/types/spritesheet-metadata\";\r\n\r\nexport const CardSpritesheetMap: {\r\n    [key: string]: SpritesheetMetadata\r\n} = {\r\n    Clubs10: {\r\n      x: 560,\r\n      y: 760,\r\n      width: 140,\r\n      height: 190\r\n    },\r\n    Clubs2: {\r\n      x: 280,\r\n      y: 1140,\r\n      width: 140,\r\n      height: 190\r\n    },\r\n    Clubs3: {\r\n      x: 700,\r\n      y: 190,\r\n      width: 140,\r\n      height: 190\r\n    },\r\n    Clubs4: {\r\n      x: 700,\r\n      y: 0,\r\n      width: 140,\r\n      height: 190\r\n    },\r\n    Clubs5: {\r\n      x: 560,\r\n      y: 1710,\r\n      width: 140,\r\n      height: 190\r\n    },\r\n    Clubs6: {\r\n      x: 560,\r\n      y: 1520,\r\n      width: 140,\r\n      height: 190\r\n    },\r\n    Clubs7: {\r\n      x: 560,\r\n      y: 1330,\r\n      width: 140,\r\n      height: 190\r\n    },\r\n    Clubs8: {\r\n      x: 560,\r\n      y: 1140,\r\n      width: 140,\r\n      height: 190\r\n    },\r\n    Clubs9: {\r\n      x: 560,\r\n      y: 950,\r\n      width: 140,\r\n      height: 190\r\n    },\r\n    ClubsA: {\r\n      x: 560,\r\n      y: 570,\r\n      width: 140,\r\n      height: 190\r\n    },\r\n    ClubsJ: {\r\n      x: 560,\r\n      y: 380,\r\n      width: 140,\r\n      height: 190\r\n    },\r\n    ClubsK: {\r\n      x: 560,\r\n      y: 190,\r\n      width: 140,\r\n      height: 190\r\n    },\r\n    ClubsQ: {\r\n      x: 560,\r\n      y: 0,\r\n      width: 140,\r\n      height: 190\r\n    },\r\n    Diamonds10: {\r\n      x: 420,\r\n      y: 190,\r\n      width: 140,\r\n      height: 190\r\n    },\r\n    Diamonds2: {\r\n      x: 420,\r\n      y: 1710,\r\n      width: 140,\r\n      height: 190\r\n    },\r\n    Diamonds3: {\r\n      x: 420,\r\n      y: 1520,\r\n      width: 140,\r\n      height: 190\r\n    },\r\n    Diamonds4: {\r\n      x: 420,\r\n      y: 1330,\r\n      width: 140,\r\n      height: 190\r\n    },\r\n    Diamonds5: {\r\n      x: 420,\r\n      y: 1140,\r\n      width: 140,\r\n      height: 190\r\n    },\r\n    Diamonds6: {\r\n      x: 420,\r\n      y: 950,\r\n      width: 140,\r\n      height: 190\r\n    },\r\n    Diamonds7: {\r\n      x: 420,\r\n      y: 760,\r\n      width: 140,\r\n      height: 190\r\n    },\r\n    Diamonds8: {\r\n      x: 420,\r\n      y: 570,\r\n      width: 140,\r\n      height: 190\r\n    },\r\n    Diamonds9: {\r\n      x: 420,\r\n      y: 380,\r\n      width: 140,\r\n      height: 190\r\n    },\r\n    DiamondsA: {\r\n      x: 420,\r\n      y: 0,\r\n      width: 140,\r\n      height: 190\r\n    },\r\n    DiamondsJ: {\r\n      x: 280,\r\n      y: 1710,\r\n      width: 140,\r\n      height: 190\r\n    },\r\n    DiamondsK: {\r\n      x: 280,\r\n      y: 1520,\r\n      width: 140,\r\n      height: 190\r\n    },\r\n    DiamondsQ: {\r\n      x: 280,\r\n      y: 1330,\r\n      width: 140,\r\n      height: 190\r\n    },\r\n    Hearts10: {\r\n      x: 140,\r\n      y: 1520,\r\n      width: 140,\r\n      height: 190\r\n    },\r\n    Hearts2: {\r\n      x: 700,\r\n      y: 380,\r\n      width: 140,\r\n      height: 190\r\n    },\r\n    Hearts3: {\r\n      x: 280,\r\n      y: 950,\r\n      width: 140,\r\n      height: 190\r\n    },\r\n    Hearts4: {\r\n      x: 280,\r\n      y: 760,\r\n      width: 140,\r\n      height: 190\r\n    },\r\n    Hearts5: {\r\n      x: 280,\r\n      y: 570,\r\n      width: 140,\r\n      height: 190\r\n    },\r\n    Hearts6: {\r\n      x: 280,\r\n      y: 380,\r\n      width: 140,\r\n      height: 190\r\n    },\r\n    Hearts7: {\r\n      x: 280,\r\n      y: 190,\r\n      width: 140,\r\n      height: 190\r\n    },\r\n    Hearts8: {\r\n      x: 280,\r\n      y: 0,\r\n      width: 140,\r\n      height: 190\r\n    },\r\n    Hearts9: {\r\n      x: 140,\r\n      y: 1710,\r\n      width: 140,\r\n      height: 190\r\n    },\r\n    HeartsA: {\r\n      x: 140,\r\n      y: 1330,\r\n      width: 140,\r\n      height: 190\r\n    },\r\n    HeartsJ: {\r\n      x: 140,\r\n      y: 1140,\r\n      width: 140,\r\n      height: 190\r\n    },\r\n    HeartsK: {\r\n      x: 140,\r\n      y: 950,\r\n      width: 140,\r\n      height: 190\r\n    },\r\n    HeartsQ: {\r\n      x: 140,\r\n      y: 760,\r\n      width: 140,\r\n      height: 190\r\n    },\r\n    Joker: {\r\n      x: 140,\r\n      y: 570,\r\n      width: 140,\r\n      height: 190\r\n    },\r\n    Spades10: {\r\n      x: 0,\r\n      y: 760,\r\n      width: 140,\r\n      height: 190\r\n    },\r\n    Spades2: {\r\n      x: 140,\r\n      y: 380,\r\n      width: 140,\r\n      height: 190\r\n    },\r\n    Spades3: {\r\n      x: 140,\r\n      y: 190,\r\n      width: 140,\r\n      height: 190\r\n    },\r\n    Spades4: {\r\n      x: 140,\r\n      y: 0,\r\n      width: 140,\r\n      height: 190\r\n    },\r\n    Spades5: {\r\n      x: 0,\r\n      y: 1710,\r\n      width: 140,\r\n      height: 190\r\n    },\r\n    Spades6: {\r\n      x: 0,\r\n      y: 1520,\r\n      width: 140,\r\n      height: 190\r\n    },\r\n    Spades7: {\r\n      x: 0,\r\n      y: 1330,\r\n      width: 140,\r\n      height: 190\r\n    },\r\n    Spades8: {\r\n      x: 0,\r\n      y: 1140,\r\n      width: 140,\r\n      height: 190\r\n    },\r\n    Spades9: {\r\n      x: 0,\r\n      y: 950,\r\n      width: 140,\r\n      height: 190\r\n    },\r\n    SpadesA: {\r\n      x: 0,\r\n      y: 570,\r\n      width: 140,\r\n      height: 190\r\n    },\r\n    SpadesJ: {\r\n      x: 0,\r\n      y: 380,\r\n      width: 140,\r\n      height: 190\r\n    },\r\n    SpadesK: {\r\n      x: 0,\r\n      y: 190,\r\n      width: 140,\r\n      height: 190\r\n    },\r\n    SpadesQ: {\r\n      x: 0,\r\n      y: 0,\r\n      width: 140,\r\n      height: 190\r\n    }\r\n  } ","import { Component, OnDestroy, OnInit, TemplateRef, ViewEncapsulation } from '@angular/core';\r\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\r\nimport { Router } from '@angular/router';\r\nimport { debounce, delay, take, tap } from 'rxjs/operators';\r\nimport { ColyseusService } from '../colyseus.service';\r\n\r\nimport {NgbModal, NgbModalRef} from '@ng-bootstrap/ng-bootstrap';\r\nimport { ResourceService } from '../resource.service';\r\nimport { NavbarService } from '../navbar/navbar.service';\r\nimport { Subscription, timer } from 'rxjs';\r\n\r\n@Component({\r\n  selector: 'app-lobby',\r\n  templateUrl: './lobby.component.html',\r\n  styleUrls: ['./lobby.component.css']\r\n})\r\nexport class LobbyComponent implements OnInit, OnDestroy {\r\n  public createForm: FormGroup;\r\n  public joinForm: FormGroup;\r\n  public lobbyForm: FormGroup;\r\n  private modalRef: NgbModalRef;\r\n  public wrongPasscode: boolean;\r\n  public isLoading: boolean;\r\n  private subs: Subscription;\r\n\r\n  constructor(\r\n    private router: Router,\r\n    public colyseus: ColyseusService,\r\n    private resourceService: ResourceService, // eagerly load card spritesheet\r\n    private fb: FormBuilder,\r\n    private modalService: NgbModal,\r\n    private navbarService: NavbarService,\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    this.subs = new Subscription();\r\n    this.isLoading = false;\r\n    this.navbarService.setMessage('Lobby');\r\n\r\n    this.createForm = this.fb.group({\r\n      roomName: ['', [Validators.required, Validators.minLength(3), Validators.maxLength(20)]],\r\n    });\r\n\r\n    this.joinForm = this.fb.group({\r\n      roomId: ['', [Validators.required]],\r\n      passcode: ['', [Validators.required, Validators.pattern(/^[0-9]{4}$/)]]\r\n    });\r\n\r\n    this.lobbyForm = this.fb.group({\r\n      username:  [localStorage.getItem('username') || '', [Validators.required, Validators.minLength(2), Validators.maxLength(16)]],\r\n      createForm: this.createForm,\r\n      joinForm: this.joinForm,\r\n    })\r\n\r\n    this.subs.add(\r\n      this.joinForm.get('passcode').valueChanges.subscribe(() => {\r\n        this.wrongPasscode = false;\r\n      })\r\n    );\r\n\r\n    this.subs.add(\r\n      this.lobbyForm.get('username').valueChanges.pipe(\r\n        debounce(()  => timer(1000)),\r\n      ).subscribe((username) => {\r\n        localStorage.setItem('username', username);\r\n      })\r\n    );\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.subs.unsubscribe();\r\n  }\r\n\r\n  public createRoom(): void {\r\n    this.isLoading = true;\r\n\r\n    this.colyseus.createRoom({\r\n      username: this.lobbyForm.get('username').value,\r\n      roomName: this.lobbyForm.get(['createForm', 'roomName']).value,\r\n    }).pipe(take(1)).subscribe(room => {\r\n      this.router.navigate(['game', room.id]);\r\n    });\r\n  }\r\n\r\n  public openTutorialModal(content: TemplateRef<any>) {\r\n    this.subs.add(\r\n      this.modalService.open(content).shown.pipe(delay(250)).subscribe(() =>\r\n        document.getElementById('tutorial-heading').scrollIntoView()\r\n      )\r\n    );\r\n  }\r\n\r\n  public tryOpenPasscodeModal(content: TemplateRef<any>, roomId: string): void {\r\n    this.joinForm.controls['roomId'].setValue(roomId);\r\n\r\n    if (this.lobbyForm.get('username').valid) {\r\n      this.modalRef = this.modalService.open(content);\r\n\r\n      this.modalRef.dismissed.pipe(take(1)).subscribe(() => {\r\n        this.wrongPasscode = false;\r\n        this.isLoading = false;\r\n      });\r\n    }\r\n    else {\r\n      // trigger field validation prompts (E.g. \"Please enter a valid username\")\r\n      this.lobbyForm.markAllAsTouched();\r\n    }\r\n  }\r\n\r\n  public tryJoinRoom(): void {\r\n    if (this.joinForm.invalid) {\r\n      this.wrongPasscode = true;\r\n      this.isLoading = false;\r\n      return;\r\n    }\r\n\r\n    this.isLoading = true;\r\n\r\n    const username = this.lobbyForm.get('username').value;\r\n    const roomId = this.joinForm.get('roomId').value;\r\n    const passcode = this.joinForm.get('passcode').value;\r\n\r\n    this.colyseus.joinGame(roomId, {\r\n      username,\r\n      passcode,\r\n    }).pipe(take(1)).subscribe(room => {\r\n      room.onMessage('passcode-accepted', () => {\r\n        this.modalRef.close();\r\n        this.router.navigate(['game', room.id]);\r\n      });\r\n\r\n      room.onMessage('passcode-rejected', () => {\r\n        this.wrongPasscode = true;\r\n        this.isLoading = false;\r\n      });\r\n    });\r\n  }\r\n}\r\n","<form [formGroup]=\"lobbyForm\">\r\n  <div class=\"container mt-3\">\r\n    <div class=\"row justify-content-center\">\r\n      <button\r\n        class=\"btn btn-success mt-1\"\r\n        (click)=\"openTutorialModal(tutorialModal)\"\r\n      >\r\n        Open Tutorial\r\n      </button>\r\n    </div>\r\n\r\n    <hr />\r\n\r\n    <div class=\"row justify-content-center\">\r\n      <div class=\"col-xs-6\">\r\n        <h4>Choose a Username</h4>\r\n        <input\r\n          id=\"username-input\"\r\n          formControlName=\"username\"\r\n          type=\"text\"\r\n          class=\"form-control\"\r\n          placeholder=\"Username\"\r\n          required\r\n        />\r\n        <div\r\n          *ngIf=\"\r\n            lobbyForm.get('username').invalid &&\r\n            lobbyForm.get('username').touched\r\n          \"\r\n          class=\"row justify-content-center\"\r\n        >\r\n          <strong>\r\n            <span class=\"text-danger\">Please enter a valid name</span>\r\n          </strong>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <hr />\r\n\r\n    <div class=\"row justify-content-center\">\r\n      <h4>Join a Game</h4>\r\n    </div>\r\n    <div class=\"row justify-content-center\">\r\n      <ng-template #noRooms>\r\n        <p><em>No games currently in progress</em></p>\r\n      </ng-template>\r\n      <div *ngIf=\"colyseus.allRooms?.length; else noRooms\">\r\n        <div class=\"row justify-content-center\">\r\n          <p><em>Click a row to join a game</em></p>\r\n        </div>\r\n        <table class=\"table table-striped table-bordered table-hover\">\r\n          <thead>\r\n            <tr>\r\n              <th scope=\"col\">Room Name</th>\r\n              <th scope=\"col\">Room ID</th>\r\n              <th scope=\"col\">Players</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <tr\r\n              *ngFor=\"let room of colyseus.allRooms\"\r\n              (click)=\"tryOpenPasscodeModal(passcodeModal, room.roomId)\"\r\n            >\r\n              <th scope=\"row\">{{ room.metadata.roomName }}</th>\r\n              <td>{{ room.roomId }}</td>\r\n              <td>{{ room.clients }}</td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    </div>\r\n\r\n    <hr />\r\n\r\n    <div class=\"row justify-content-center\">\r\n      <h4>Create a New Game</h4>\r\n    </div>\r\n\r\n    <form [formGroup]=\"createForm\">\r\n      <div class=\"row justify-content-center\">\r\n        <div class=\"col-xs-6\">\r\n          <input\r\n            formControlName=\"roomName\"\r\n            type=\"text\"\r\n            class=\"form-control\"\r\n            aria-label=\"Large\"\r\n            placeholder=\"Game Name\"\r\n            required\r\n          />\r\n        </div>\r\n      </div>\r\n      <div class=\"row justify-content-center\">\r\n        <button\r\n          class=\"btn btn-primary mt-1\"\r\n          type=\"submit\"\r\n          [disabled]=\"createForm.invalid || isLoading\"\r\n          (click)=\"createRoom()\"\r\n          autofocus\r\n        >\r\n          Create\r\n        </button>\r\n      </div>\r\n    </form>\r\n\r\n    <!-- Join Game Passcode Modal -->\r\n    <form [formGroup]=\"joinForm\">\r\n      <ng-template #passcodeModal let-modal>\r\n        <div class=\"modal-header\">\r\n          <h4 class=\"modal-title\" id=\"modal-basic-title\">\r\n            Enter room passcode\r\n          </h4>\r\n        </div>\r\n        <div class=\"modal-body\">\r\n          <div *ngIf=\"wrongPasscode\" class=\"alert alert-danger\" role=\"alert\">\r\n            Incorrect passcode, please try again.\r\n          </div>\r\n          <div class=\"input-group input-group-lg\">\r\n            <input\r\n              formControlName=\"passcode\"\r\n              (keydown.enter)=\"tryJoinRoom()\"\r\n              type=\"text\"\r\n              class=\"form-control\"\r\n              aria-label=\"Large\"\r\n              placeholder=\"Passcode\"\r\n              autofocus\r\n            />\r\n            <button\r\n              class=\"btn btn-primary\"\r\n              type=\"submit\"\r\n              [disabled]=\"isLoading || joinForm.invalid\"\r\n              (click)=\"tryJoinRoom()\"\r\n            >\r\n              Join\r\n            </button>\r\n            <button\r\n              class=\"btn btn-outline-secondary\"\r\n              aria-label=\"Close\"\r\n              (click)=\"modal.dismiss()\"\r\n            >\r\n              Back\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </ng-template>\r\n    </form>\r\n\r\n    <!-- Tutorial Modal -->\r\n    <ng-template #tutorialModal let-modal class=\"tutorial-modal\">\r\n      <div class=\"modal-header\">\r\n        <h4 class=\"modal-title\" id=\"tutorial-heading\">\r\n          Tutorial\r\n        </h4>\r\n      </div>\r\n      <div class=\"modal-body tutorial\">\r\n        <ul>\r\n          <li>\r\n            The game is split up into rounds.\r\n          </li>\r\n\r\n          <li>\r\n            The goal of each round is to make the best poker hand you can each round.\r\n          </li>\r\n        </ul>\r\n\r\n        <div class=\"row justify-content-center\">\r\n          <h3>Example round:</h3>\r\n          <img src=\"assets/example-round.png\" />\r\n        </div>\r\n\r\n        <ul>\r\n          <ul>\r\n            <li>\r\n              The top row: these are the shared cards between players, \"on the table\".\r\n            </li>\r\n  \r\n            <li>\r\n              The bottom row: these are the cards in your own hand. Only you can see these cards.\r\n            </li>\r\n  \r\n            <li>\r\n              The green bar: this shows the remaining time in the round.\r\n            </li>\r\n  \r\n            <li>\r\n              \"Currently winning\": indicates that you currently have the best hand in round out of all players.\r\n            </li>\r\n          </ul>\r\n\r\n          <li>\r\n            To swap a card from the table to your hand, first select the card you want from the top row. Then select a card in your hand to swap.\r\n          </li>\r\n\r\n          <li>\r\n            Each round, you will earn points corresponding to the hand you've made.\r\n\r\n            <ul>\r\n              <li>\r\n                You will score a large bonus if you have the best hand at the end of the round.\r\n              </li>\r\n            </ul>\r\n          </li>\r\n\r\n          <li>\r\n            A showdown concludes each round, showing the result of the round, and the overall scoes of the game.\r\n          </li>\r\n        </ul>\r\n\r\n        <div class=\"row justify-content-center\">\r\n          <h3>Hands:</h3>\r\n          <img src=\"assets/poker-hands.png\" />\r\n        </div>\r\n\r\n        <hr />\r\n\r\n        <div class=\"row justify-content-center\">\r\n          <button\r\n            class=\"btn btn-primary\"\r\n            aria-label=\"Close\"\r\n            (click)=\"modal.dismiss()\"\r\n          >\r\n            Close\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </ng-template>\r\n  </div>\r\n</form>\r\n","import { AfterViewInit, Component, ElementRef, HostListener, OnDestroy, OnInit, ViewChild } from '@angular/core';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { Observable } from 'rxjs';\r\nimport { map, take } from 'rxjs/operators';\r\nimport { Card, GameConstants, RiffleState, GameView, Player } from '../../../../riffle-server/src/RiffleSchema';\r\nimport { ColyseusService } from '../colyseus.service';\r\nimport { NavbarService } from '../navbar/navbar.service';\r\nimport { ResourceService } from '../resource.service';\r\nimport { AnimtatedCard as AnimatedCard } from '../types/animated-card';\r\n\r\ntype MouseTouchEvent = MouseEvent & TouchEvent;\r\n\r\n@Component({\r\n  selector: 'app-game',\r\n  templateUrl: './game.component.html',\r\n  styleUrls: ['./game.component.css']\r\n})\r\nexport class GameComponent implements OnInit, AfterViewInit, OnDestroy {\r\n  @ViewChild('cardCanvas')\r\n  cardCanvas: ElementRef<HTMLCanvasElement>;\r\n\r\n  @ViewChild('handInfo')\r\n  handInfo: ElementRef<HTMLCanvasElement>;\r\n\r\n  public ctx: CanvasRenderingContext2D;\r\n  private canvas: HTMLCanvasElement;\r\n  private isMobile: boolean;\r\n\r\n  // for drawing cards on the canvas, and to detect which card has been clicked on mouse down\r\n  private cardRatio = 140 / 90;\r\n  private cardsPerRow = 5;\r\n  private cardGapRatio = 0.25;\r\n  private cardWidth: number;\r\n  private cardHeight: number;\r\n  private cardGapHeight: number;\r\n  private handStartY: number;\r\n\r\n  public gameId: Observable<string>;\r\n  public selectedCommonIndex;\r\n  public selectedHandIndex;\r\n  public state: RiffleState;\r\n  public GameView = GameView;\r\n\r\n  public GameConstants = GameConstants;\r\n  private roundTimeInterval: any;\r\n  private roundTimeDeltaMS = 50;\r\n\r\n  public isNextRoundClicked: boolean;\r\n\r\n  private removeGameViewChangedListener: Function;\r\n  private animationInterval: any;\r\n\r\n  private animatedCards: AnimatedCard[];\r\n  private animationIntervalMS = 50;\r\n  private cardSwapAnimationTimeMS = 2000;\r\n\r\n  public get selfPlayer(): Player {\r\n    return this.state.players.get(this.colyseus.room.sessionId);\r\n  }\r\n\r\n  public get stateHandCards(): Card[] {\r\n    return this.selfPlayer.cards;\r\n  }\r\n\r\n  public get playersAsArray(): Player[] {\r\n    const arr = [];\r\n    this.state.players.forEach((player) => arr.push(player));\r\n    return arr;\r\n  }\r\n\r\n  constructor(\r\n    private router: Router,\r\n    private route: ActivatedRoute,\r\n    public colyseus: ColyseusService,\r\n    public resourceService: ResourceService,\r\n    private navbarService: NavbarService,\r\n  ) { }\r\n\r\n  public startGame(): void {\r\n    this.colyseus.startGame();\r\n  }\r\n\r\n  @HostListener('window:resize')\r\n  onResize() {\r\n    this.autoAdjustCanvas();\r\n    // TODO possiblity of cards being undefined here?\r\n    this.drawCards();\r\n  }\r\n\r\n  /**\r\n   * Automatically adjust canvas size to fit nicely on the screen\r\n   */\r\n  private autoAdjustCanvas(): void {\r\n    const spritesheetCardWidth = 140;\r\n    const defaultWidth = spritesheetCardWidth * 3;\r\n    const border = 5;\r\n\r\n    const availableWidth = window.innerWidth - (border * 2);\r\n    const availableHeight =\r\n      window.innerHeight\r\n      - this.canvas.offsetTop\r\n      - this.handInfo.nativeElement.getBoundingClientRect().height\r\n      - (border * 2);\r\n\r\n    let chosenWidth: number;\r\n    let chosenHeight: number;\r\n\r\n    // try using all the available width\r\n    chosenWidth = Math.min(availableWidth, defaultWidth);\r\n    this.cardWidth = Math.round(chosenWidth / this.cardsPerRow);\r\n    this.cardHeight = Math.round(this.cardWidth * this.cardRatio);\r\n    this.cardGapHeight = this.cardHeight * this.cardGapRatio;\r\n    chosenHeight = Math.floor((this.cardHeight * 2) + this.cardGapHeight);\r\n\r\n    if (chosenHeight > availableHeight) {\r\n      // canvas is too big for the height; scale to fill the height instead\r\n      chosenHeight = availableHeight;\r\n      this.cardHeight = Math.round(chosenHeight / (2 + this.cardGapRatio));\r\n      this.cardWidth = Math.round(this.cardHeight / this.cardRatio);\r\n      chosenWidth = this.cardWidth * this.cardsPerRow;\r\n      this.cardGapHeight = chosenHeight - (this.cardHeight * 2);\r\n    }\r\n\r\n    this.handStartY = this.cardHeight + this.cardGapHeight;\r\n\r\n    this.canvas.width = chosenWidth;\r\n    this.canvas.height = chosenHeight;\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    // from https://stackoverflow.com/a/3540295\r\n    // detect if this is a touch device or not\r\n    if(/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent) \r\n        || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(navigator.userAgent.substr(0,4))) { \r\n        this.isMobile = true;\r\n    }\r\n\r\n    if (this.colyseus.room === undefined) {\r\n      // no handle on this game; redirect to the lobby\r\n      this.router.navigate(['lobby']);\r\n    }\r\n\r\n    this.gameId = this.route.params.pipe(\r\n      map((params => params['id'])),\r\n    );\r\n\r\n    this.animatedCards = [];\r\n    this.animationInterval = setInterval(() => {\r\n      this.animatedCards.forEach((animatedCard) => {\r\n        animatedCard.update();\r\n      });\r\n      this.animatedCards = this.animatedCards.filter((animatedCard) => !animatedCard.isFinished);\r\n\r\n      this.drawCards();\r\n    }, this.animationInterval);\r\n\r\n    // start with default state to prevent undefined errors before the state is downloaded initially\r\n    this.state = new RiffleState();\r\n\r\n    this.colyseus.room$.pipe(\r\n      take(1)\r\n    ).subscribe(room => {\r\n      room.onStateChange((state: RiffleState) => {\r\n        this.state = state;\r\n\r\n        if (state.gameView === GameView.Swapping) {\r\n          this.drawCards();\r\n        }\r\n      });\r\n\r\n      this.removeGameViewChangedListener = (room.state as RiffleState).listen('gameView', (updatedGameView, prevGameView) => {\r\n        console.log(`Game view changed from ${prevGameView} to ${updatedGameView}`);\r\n        this.onGameViewChanged(updatedGameView);\r\n      });\r\n\r\n      room.onMessage('common-index-swapped', (commonIndex) => {\r\n        if (this.selectedCommonIndex === commonIndex) {\r\n          // deselect selected common card, since it was swapped out by someone else\r\n          this.selectedCommonIndex = -1;\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    if (this.removeGameViewChangedListener) this.removeGameViewChangedListener();\r\n    clearInterval(this.animationInterval);\r\n  }\r\n\r\n  private onGameViewChanged(newGameView: GameView): void {\r\n    switch (newGameView) {\r\n      case GameView.Swapping:\r\n        // reset\r\n        this.selectedCommonIndex = -1;\r\n        this.selectedHandIndex = -1;\r\n\r\n        this.roundTimeInterval = setInterval(() => {\r\n          this.state.roundTimeRemainingMS -= this.roundTimeDeltaMS;\r\n          this.drawRoundProgressBar();\r\n        }, this.roundTimeDeltaMS);\r\n\r\n        // set navbar message\r\n        this.navbarService.setMessage('Swap for a good hand!');\r\n        break;\r\n      case GameView.Showdown:\r\n        // reset\r\n        this.isNextRoundClicked = false;\r\n\r\n        // set navbar message\r\n        this.navbarService.setMessage('Showdown!');\r\n\r\n        clearInterval(this.roundTimeInterval);\r\n        break;\r\n    }\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    this.initCanvas();\r\n  }\r\n\r\n  private initCanvas(): void {\r\n    this.canvas = this.cardCanvas.nativeElement;\r\n    this.ctx = this.cardCanvas.nativeElement.getContext('2d');\r\n\r\n    this.autoAdjustCanvas();\r\n\r\n    // register mouse event listeners\r\n    this.canvas.addEventListener('mousedown', e => {\r\n      this.onMouseEvent('mousedown', e as MouseTouchEvent);\r\n    });\r\n    this.canvas.addEventListener('mouseup', e => {\r\n      this.onMouseEvent('mouseup', e as MouseTouchEvent);\r\n    });\r\n    this.canvas.addEventListener('mousemove', e => {\r\n      this.onMouseEvent('mousemove', e as MouseTouchEvent);\r\n    });\r\n    this.canvas.addEventListener('mouseout', e => {\r\n      this.onMouseEvent('mouseout', e as MouseTouchEvent);\r\n    });\r\n\r\n    // register event listeners for touch devices\r\n    this.canvas.addEventListener('touchstart', e => {\r\n      this.onMouseEvent('touchstart', e as MouseTouchEvent);\r\n    });\r\n    this.canvas.addEventListener('touchend', e => {\r\n      this.onMouseEvent('touchend', e as MouseTouchEvent);\r\n    });\r\n    this.canvas.addEventListener('touchmove', e => {\r\n      this.onMouseEvent('touchmove', e as MouseTouchEvent);\r\n    });\r\n    this.canvas.addEventListener('touchcancel', e => {\r\n        this.onMouseEvent('touchcancel', e as MouseTouchEvent);\r\n    });\r\n  }\r\n\r\n  private onMouseEvent(action, e: MouseTouchEvent): void {\r\n    if (this.isMobile) {\r\n        // prevent back/forward swipes etc. in the browser on mobile devices\r\n        e.preventDefault();\r\n    }\r\n    \r\n    // extract mouse position based on event vars\r\n    // (different on mobile devices)\r\n    // TODO: extract this outside this function\r\n    let cursorX: number;\r\n    let cursorY: number;\r\n    if (this.isMobile) {\r\n      cursorX = e.touches[0].clientX - this.canvas.getBoundingClientRect().left;\r\n      cursorY = e.touches[0].clientY - this.canvas.getBoundingClientRect().top;\r\n    }\r\n    else {\r\n      cursorX = e.clientX - this.canvas.getBoundingClientRect().left;\r\n      cursorY = e.clientY - this.canvas.getBoundingClientRect().top;\r\n    }\r\n\r\n    switch (action) {\r\n        case 'mousedown':\r\n        case 'touchstart':\r\n          // card select detection\r\n          const cardIndex = Math.floor(cursorX / this.cardWidth);\r\n          const commonCardClicked = cursorY < this.cardHeight;\r\n          const handCardClicked = cursorY > this.handStartY;\r\n          const anyCardClicked = commonCardClicked || handCardClicked;\r\n\r\n          if (anyCardClicked) {\r\n            if (commonCardClicked) {\r\n              this.onCommonCardClicked(cardIndex);\r\n            }\r\n            else {\r\n              // hand card clicked\r\n              this.onHandCardClicked(cardIndex);\r\n            }\r\n          }\r\n          else {\r\n            // empty area clicke\r\n            this.deselectAllCards();\r\n          }\r\n          \r\n          // re-draw cards to render the card(s) highlight\r\n          this.drawCards();\r\n          break;\r\n        case 'mouseup':\r\n        case 'touchend':\r\n        case 'mouseout':\r\n            //\r\n            break;\r\n        case 'mousemove':\r\n        case 'touchmove':\r\n            //\r\n            break;\r\n    }\r\n  }\r\n\r\n  private drawCards(): void {\r\n    // clear canvas\r\n    this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\r\n\r\n    // redraw round progress bar\r\n    this.drawRoundProgressBar();\r\n\r\n    const spritesheet = this.resourceService.spritesheet;\r\n    this.state.commonCards.forEach((card, index) => {\r\n      const metadata = this.resourceService.getCardSpritesheetMedata(card);\r\n      const offsetX = this.cardWidth * index;\r\n      const offsetY = 0;\r\n      this.ctx.drawImage(\r\n        spritesheet,\r\n        metadata.x,\r\n        metadata.y,\r\n        metadata.width,\r\n        metadata.height,\r\n        offsetX,\r\n        offsetY,\r\n        this.cardWidth,\r\n        this.cardHeight\r\n      );\r\n    });\r\n\r\n    if (this.selectedCommonIndex !== -1) {\r\n      // highlight this card as being selected\r\n      const offsetX = this.cardWidth * this.selectedCommonIndex;\r\n      this.ctx.strokeStyle = '#0000BB';\r\n      this.ctx.lineWidth = 3;\r\n      this.ctx.beginPath();\r\n      this.ctx.rect(offsetX, 0, this.cardWidth, this.cardHeight);\r\n      this.ctx.stroke();\r\n    }\r\n\r\n    this.stateHandCards.forEach((card, index) => {\r\n      const metadata = this.resourceService.getCardSpritesheetMedata(card);\r\n      const offsetX = this.cardWidth * index;\r\n      const offsetY = this.handStartY;\r\n      this.ctx.drawImage(\r\n        spritesheet,\r\n        metadata.x,\r\n        metadata.y,\r\n        metadata.width,\r\n        metadata.height,\r\n        offsetX,\r\n        offsetY,\r\n        this.cardWidth,\r\n        this.cardHeight\r\n      );\r\n    });\r\n\r\n    if (this.selectedHandIndex !== -1) {\r\n      // highlight this card as being selected\r\n      const offsetX = this.cardWidth * this.selectedHandIndex;\r\n      this.ctx.strokeStyle = '#0000BB';\r\n      this.ctx.lineWidth = 3;\r\n      this.ctx.beginPath();\r\n      this.ctx.rect(offsetX, this.handStartY, this.cardWidth, this.cardHeight);\r\n      this.ctx.stroke();\r\n    }\r\n\r\n    // draw card swap animations (if any)\r\n    this.animatedCards.forEach((animatedCard) => {\r\n      const metadata = this.resourceService.getCardSpritesheetMedata(animatedCard.card);\r\n      this.ctx.drawImage(\r\n        spritesheet,\r\n        metadata.x,\r\n        metadata.y,\r\n        metadata.width,\r\n        metadata.height,\r\n        animatedCard.roundX,\r\n        animatedCard.roundY,\r\n        this.cardWidth,\r\n        this.cardHeight\r\n      );\r\n    });\r\n  }\r\n\r\n  private drawRoundProgressBar(): void {\r\n    const roundProgress = this.state.roundTimeRemainingMS / GameConstants.roundTimeMS;\r\n    const barWidth = this.canvas.width * roundProgress;\r\n\r\n    // calculate progress bar RGB (changes from green to red over time)\r\n    const compMax = 180;\r\n    const compLimit = 1200;\r\n    const exponent = 12;\r\n    const exponentMax = Math.pow(2, exponent);\r\n\r\n    let red = Math.floor(Math.pow(2, (1 - roundProgress) * exponent) / exponentMax * compLimit);\r\n\r\n    if (red < 0) red = 0;\r\n    if (red > compMax) red = compMax;\r\n\r\n    let green = compMax - red;\r\n\r\n    const redString = red < 16 ? '0' + red.toString(16) : red.toString(16);\r\n    const greenString = green < 16 ? '0' + green.toString(16) : green.toString(16);\r\n\r\n    this.ctx.fillStyle = `#${redString}${greenString}00`;\r\n\r\n    this.ctx.clearRect(0, this.cardHeight, this.canvas.width, this.cardGapHeight);\r\n    this.ctx.fillRect(0, this.cardHeight, barWidth, this.cardGapHeight);\r\n  }\r\n\r\n  public onCommonCardClicked(index: number): void {\r\n    if (this.selectedCommonIndex === index) {\r\n      this.selectedCommonIndex = -1;\r\n    }\r\n    else {\r\n      this.selectedCommonIndex = index;\r\n      this.swapIfBothSelected();\r\n    }\r\n  }\r\n\r\n  public onHandCardClicked(index: number): void {\r\n    if (this.selectedCommonIndex === -1) {\r\n      this.sortHand();\r\n      return;\r\n    }\r\n\r\n    if (this.selectedHandIndex === index) {\r\n      this.selectedHandIndex = -1;\r\n    }\r\n    else {\r\n      this.selectedHandIndex = index;\r\n      this.swapIfBothSelected();\r\n    }\r\n  }\r\n\r\n  private swapIfBothSelected(): void {\r\n    if (this.selectedCommonIndex !== -1 && this.selectedHandIndex !== -1) {\r\n      // animated common card -> hand card\r\n      this.animatedCards.push(new AnimatedCard(\r\n        this.state.commonCards[this.selectedCommonIndex],\r\n        this.selectedCommonIndex * this.cardWidth,\r\n        0,\r\n        this.selectedHandIndex * this.cardWidth,\r\n        this.handStartY,\r\n        this.cardSwapAnimationTimeMS / this.animationIntervalMS,\r\n      ));\r\n\r\n      this.colyseus.swapCards(this.selectedCommonIndex, this.selectedHandIndex);\r\n      this.deselectAllCards();\r\n    }\r\n  }\r\n\r\n  private deselectAllCards(): void {\r\n    this.selectedCommonIndex = -1;\r\n    this.selectedHandIndex = -1;\r\n  }\r\n\r\n  public onNextRoundClicked(): void {\r\n    this.isNextRoundClicked = true;\r\n    this.colyseus.room.send('next-round-vote');\r\n  }\r\n\r\n  public sortHand(): void {\r\n    this.colyseus.sortHand();\r\n  }\r\n}\r\n","<div class=\"container mt-1\">\r\n    <div [hidden]=\"state.gameView !== GameView.GameLobby\">\r\n        <div class=\"text-center\">\r\n            <h4>Passcode:</h4>\r\n        </div>\r\n        <div class=\"text-center\">\r\n            <h3 [innerText]=\"colyseus.gamePasscode\"></h3>\r\n        </div>\r\n        <div class=\"text-center\">\r\n            <p [innerText]=\"\r\n                selfPlayer?.isHost ?\r\n                'Press Start Game when all players have joined.' :\r\n                'Waiting for the host to start the game...'\r\n            \"></p>\r\n            <div class=\"row justify-content-center\">\r\n                <button\r\n                    class=\"btn btn-primary mb-3\"\r\n                    type=\"button\"\r\n                    *ngIf=\"selfPlayer?.isHost\"\r\n                    (click)=\"startGame()\"\r\n                >Start Game</button>\r\n            </div>\r\n        </div>\r\n        <hr />\r\n        <div class=\"text-center\">\r\n            <p>Players connected:</p>\r\n            <ul class=\"player-list\">\r\n                <li *ngFor=\"let player of playersAsArray\" [innerText]=\"player.name\"></li>\r\n            </ul>\r\n        </div>\r\n        <hr />\r\n    </div> \r\n\r\n    <div [hidden]=\"state.gameView !== GameView.Swapping\">\r\n        <strong class=\"text-center\">\r\n            <p class=\"mb-1\" [innerText]=\"\r\n                selectedCommonIndex === -1 ?\r\n                'Select a card to swap (top row)' :\r\n                'Select a card to swap (bottom row)'\">\r\n            </p>\r\n        </strong>\r\n        <div id=\"card-canvas-div\" class=\"mt-0\">\r\n            <canvas\r\n                id=\"card-canvas\"\r\n                #cardCanvas\r\n            ></canvas>\r\n        </div>\r\n        <strong class=\"text-center\" #handInfo>\r\n            <p *ngIf=\"selfPlayer\" class=\"mb-1\">\r\n                Your hand: <span class=\"text-primary\" [innerText]=\"selfPlayer.currentHandDesc\"></span>\r\n                for <span class=\"text-primary\" [innerText]=\"selfPlayer.currentHandScore\"></span> points\r\n                <br />\r\n                <span *ngIf=\"selfPlayer.isCurrentlyWinning\" class=\"text-success\">Currently winning</span>\r\n                <span *ngIf=\"!selfPlayer.isCurrentlyWinning\" class=\"text-danger\">Currently losing</span>\r\n            </p>\r\n        </strong>\r\n    </div>\r\n\r\n    <div *ngIf=\"state.gameView === GameView.Showdown\">\r\n        <div class=\"text-center\">\r\n            <div class=\"row justify-content-center\">\r\n                <table class=\"table table-bordered\">\r\n                    <thead class=\"thead-dark\">\r\n                        <tr>\r\n                            <th class=\"fit\" scope=\"col\">Name</th>\r\n                            <th class=\"fit\" scope=\"col\">Hand</th>\r\n                            <th class=\"fit\" scope=\"col\">Total Score</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        <tr *ngFor=\"let result of state.showdownResults\">\r\n                            <th class=\"fit\" scope=\"row\">{{ result.playerName }}</th>\r\n                            <td class=\"fit\" >\r\n                                {{ result.hand }}\r\n                                <ng-container *ngIf=\"result.isWinningHand\">\r\n                                    <span class=\"text-success\">(WINNER)</span>\r\n                                </ng-container>\r\n                            </td>\r\n                            <td class=\"fit\" >\r\n                                {{ result.totalScore }}\r\n                                <ng-container *ngIf=\"result.isWinningHand\">\r\n                                    <span class=\"text-success\">(+ {{ result.handScore }})</span>\r\n                                </ng-container>\r\n                            </td>\r\n                        </tr>\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n\r\n            <div class=\"fixed-bottom\">\r\n                <button\r\n                    class=\"btn btn-primary mb-3\"\r\n                    type=\"button\"\r\n                    [disabled]=\"isNextRoundClicked\"\r\n                    (click)=\"onNextRoundClicked()\"\r\n                >\r\n                    {{ isNextRoundClicked ? 'Waiting for others...' : 'Next Round' }} [{{ state.numVotedNextRound }} / {{ state.nextRoundVotesRequired }}]\r\n                </button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>","import { Component, OnInit } from '@angular/core';\r\nimport { NavbarService } from './navbar.service';\r\n\r\n@Component({\r\n  selector: 'app-navbar',\r\n  templateUrl: './navbar.component.html',\r\n  styleUrls: ['./navbar.component.css']\r\n})\r\nexport class NavbarComponent implements OnInit {\r\n\r\n  constructor(\r\n    public navbarService: NavbarService,\r\n  ) {}\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<nav class=\"navbar navbar-expand-lg navbar-light bg-light border-bottom py-0\">\r\n  <a class=\"navbar-brand\">Riffle{{ navbarService.navbarMessage | async }}</a>\r\n  <div class=\"collapse navbar-collapse\" id=\"navbarSupportedContent\">\r\n    <ul class=\"navbar-nav ml-auto mt-2 mt-lg-0\">\r\n      <li class=\"nav-item active\">\r\n        <a class=\"nav-link\" href=\"/lobby\"\r\n          >Lobby</a\r\n        >\r\n      </li>\r\n    </ul>\r\n  </div>\r\n</nav>\r\n\r\n","import { NgModule } from '@angular/core';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { GameComponent } from './game/game.component';\r\nimport { LobbyComponent } from './lobby/lobby.component';\r\n\r\nconst routes: Routes = [\r\n  { path: '', component: LobbyComponent },\r\n  { path: 'game/:id', component: GameComponent },\r\n  { path: '**', redirectTo: '' }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forRoot(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class AppRoutingModule { }\r\n","import { Injectable } from '@angular/core';\r\nimport { BehaviorSubject } from 'rxjs';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class NavbarService {\r\n  public navbarMessage: BehaviorSubject<string>;\r\n\r\n  constructor() {\r\n    this.navbarMessage = new BehaviorSubject('');\r\n  }\r\n\r\n  public setMessage(message: string): void {\r\n    this.navbarMessage.next(` - ${message}`);\r\n  }\r\n\r\n  public clearMessage(): void {\r\n    this.navbarMessage.next('');\r\n  }\r\n}\r\n","import { enableProdMode } from '@angular/core';\r\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\r\n\r\nimport { AppModule } from './app/app.module';\r\nimport { environment } from './environments/environment';\r\n\r\nif (environment.production) {\r\n  enableProdMode();\r\n}\r\n\r\nplatformBrowserDynamic().bootstrapModule(AppModule)\r\n  .catch(err => console.error(err));\r\n","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"zn8P\";"],"sourceRoot":"webpack:///"}